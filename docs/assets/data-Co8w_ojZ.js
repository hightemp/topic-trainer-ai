import{E as h,r as i,m,x as s}from"./index-B84cw-sY.js";const C=h("data",()=>{const n=i([]),o=i([]),u=i(!1);async function r(){const[e,a]=await Promise.all([s.getAllCategories(),s.getAllQuestions()]);n.value=e,o.value=a,u.value=!0}async function l(e){await s.saveCategory(e),n.value.push(e)}async function c(e){await s.saveCategory(e);const a=n.value.findIndex(t=>t.id===e.id);a!==-1&&(n.value[a]=e)}async function v(e){await s.deleteCategory(e),n.value=n.value.filter(a=>a.id!==e)}async function f(e){await s.saveQuestion(e),o.value.push(e)}async function p(e){await s.saveQuestion(e);const a=o.value.findIndex(t=>t.id===e.id);a!==-1&&(o.value[a]=e)}async function g(e){await s.deleteQuestion(e),o.value=o.value.filter(a=>a.id!==e)}const y=m(()=>{const e=new Map,a=[];return n.value.forEach(t=>{e.set(t.id,{...t,children:[]})}),n.value.forEach(t=>{const d=e.get(t.id);t.parentId&&e.has(t.parentId)?e.get(t.parentId).children.push(d):a.push(d)}),a});return{categories:n,questions:o,isLoaded:u,loadData:r,addCategory:l,updateCategory:c,removeCategory:v,addQuestion:f,updateQuestion:p,removeQuestion:g,categoriesTree:y}});export{C as u};
