# Topic Trainer AI

SPA приложение для обучения и тренировки знаний с использованием искусственного интеллекта. Приложение позволяет генерировать вопросы по заданным темам, проходить тестирование с использованием интервального повторения и получать обратную связь от AI.

## Технический стек

- **Framework**: Vue 3 (Composition API, `<script setup>`)
- **Language**: TypeScript
- **Build Tool**: Vite
- **State Management**: Pinia
- **Routing**: Vue Router
- **Styling**: CSS / SCSS (Scoped styles)
- **Persistence**: IndexedDB (через `idb`) для хранения вопросов, истории и настроек локально в браузере.
- **AI Integration**: OpenRouter API (поддержка различных моделей).
- **Deployment**: GitHub Pages (папка `docs`).

## Архитектура данных

### Сущности

1.  **Category (Категория)**
    - `id`: string (uuid)
    - `name`: string
    - `parentId`: string | null (для иерархии)

2.  **Question (Вопрос)**
    - `id`: string (uuid)
    - `text`: string (Markdown)
    - `correctAnswer`: string (Markdown)
    - `difficulty`: number (1-5)
    - `tags`: string[]
    - `categoryId`: string
    - `nextReviewDate`: number (timestamp) - для интервального повторения
    - `interval`: number - текущий интервал в днях
    - `repetitionFactor`: number - E-factor (SM-2 алгоритм)

3.  **Attempt (Попытка/История)**
    - `id`: string
    - `questionId`: string
    - `date`: number (timestamp)
    - `userAnswer`: string
    - `aiScore`: number (0-10)
    - `aiFeedback`: string
    - `duration`: number (секунды)

4.  **Settings (Настройки)**
    - `openRouterKey`: string
    - `openRouterModel`: string (default: "google/gemini-2.0-flash-exp" или другая дешевая/бесплатная)
    - `userName`: string

## Функциональные модули

1.  **Настройки (Settings)**
    - Ввод и сохранение API ключа OpenRouter.
    - Выбор модели.
    - Управление данными (экспорт/импорт JSON).

2.  **Генератор (AI Chat)**
    - Чат-интерфейс для общения с AI.
    - Tool calling для создания вопросов/категорий из текста.
    - Возможность редактирования сгенерированного перед сохранением.

3.  **Библиотека (Library)**
    - Просмотр дерева категорий.
    - Фильтрация по тегам.
    - CRUD операции для вопросов и категорий.

4.  **Тренировка (Trainer)**
    - Режим настройки тренировки (выбор категорий/тегов).
    - Интерфейс вопроса:
        - Отображение вопроса.
        - Поле ввода ответа (Markdown editor или textarea).
        - Таймер (вкл/выкл).
    - Проверка ответа:
        - Отправка ответа и правильного ответа в AI.
        - Получение оценки и фидбека.
        - Обновление даты следующего повторения (SM-2).

5.  **Статистика (Stats)**
    - Графики прогресса.
    - AI анализ слабых мест и советы.

## TODO

- [ ] **Инициализация проекта**
    - [ ] Настроить Vite (build output -> `docs`, base url).
    - [ ] Установить Pinia, Vue Router, IDB, Markdown-it.
    - [ ] Настроить базовый лейаут (Sidebar/Navigation) и CSS переменные.

- [ ] **Базовая логика (Stores & Services)**
    - [ ] Создать сервис для работы с IndexedDB.
    - [ ] Создать Pinia store для настроек.
    - [ ] Создать Pinia store для вопросов и категорий.
    - [ ] Реализовать алгоритм интервального повторения (SM-2).

- [ ] **Модуль Настроек**
    - [ ] Страница настроек (API Key, Model).

- [ ] **Модуль Библиотеки**
    - [ ] Компонент дерева категорий.
    - [ ] Список вопросов.
    - [ ] Форма создания/редактирования вопроса.

- [ ] **Модуль AI Генерации**
    - [ ] Сервис для работы с OpenRouter API.
    - [ ] Чат-интерфейс.
    - [ ] Реализация "Tools" для AI (функции `create_question`, `create_category`).

- [ ] **Модуль Тренировки**
    - [ ] Экран настройки сессии (выбор тем).
    - [ ] Экран вопроса (Вопрос, Ответ, Таймер).
    - [ ] Экран результата (Оценка AI, Фидбек).
    - [ ] Логика обновления интервалов повторения.

- [ ] **Модуль Статистики**
    - [ ] Сбор метрик.
    - [ ] Страница статистики с запросом анализа к AI.

- [ ] **Финальная полировка**
    - [ ] Стилизация.
    - [ ] Тестирование сборки.